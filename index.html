<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SuperMenu | Mieux manger, moins payer</title>
    
    <link rel="icon" href="https://fav.farm/ü•ó" />

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #f8fafc; transition: all 0.5s ease; }
        .premium-list { background: #0f172a; border: 1px solid rgba(255, 255, 255, 0.1); }
        .recipe-card:hover { transform: translateY(-8px); box-shadow: 0 20px 40px rgba(0,0,0,0.1); }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .modal-blur { backdrop-filter: blur(12px); }
        
        :root { --store-color: #e31e24; }

        .check-box {
            width: 24px; height: 24px;
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 8px;
            display: flex; align-items: center; justify-content: center;
            transition: all 0.3s ease;
        }
        .checked-item .check-box {
            background-color: var(--store-color);
            border-color: var(--store-color);
        }
        .checked-item .item-text { opacity: 0.4; text-decoration: line-through; }
        .check-icon { display: none; color: white; width: 16px; height: 16px; }
        .checked-item .check-icon { display: block; }
        
        .recipe-img { height: 180px; width: 100%; object-fit: cover; border-radius: 1.5rem; }
    </style>
</head>
<body class="text-slate-900 italic">

    <div class="bg-slate-900 border-b-4 transition-colors duration-500" id="topBorder" style="border-color: #e31e24;">
        <div class="max-w-6xl mx-auto px-6 py-3 flex flex-col md:flex-row justify-between items-center text-white">
            <div class="flex items-center space-x-4">
                <span class="bg-red-600 px-3 py-1 rounded-full text-[10px] font-black uppercase" id="statusBadge">Offre en cours</span>
                <span class="text-[11px] font-bold opacity-70 uppercase tracking-widest italic">Du 19 f√©v. au 25 f√©v. 2026</span>
            </div>
            <a id="storeLink" href="https://www.superc.ca/circulaire-en-ligne" target="_blank" class="text-[10px] font-black uppercase underline hover:opacity-80 transition-opacity mt-2 md:mt-0 italic">
                Circulaire officielle <span id="linkStoreName">Super C</span>
            </a>
        </div>
    </div>

    <nav class="bg-white/95 backdrop-blur-md sticky top-0 z-40 border-b border-slate-100">
        <div class="max-w-6xl mx-auto px-6 h-28 flex flex-col md:flex-row justify-between items-center">
            <div class="flex items-center">
                <div id="logoTag" class="bg-red-600 text-white font-black px-4 py-1.5 rounded-l-lg italic text-xl transform -skew-x-12">SUPER</div>
                <div class="bg-slate-900 text-white px-4 py-1.5 rounded-r-lg flex items-center transform -skew-x-12 -ml-2">
                    <span class="not-italic font-black text-xl uppercase">MENU</span>
                </div>
            </div>

            <div class="flex overflow-x-auto no-scrollbar space-x-2 max-w-full pb-1 mt-4 md:mt-0">
                <button onclick="switchStore('superc')" id="btn-superc" class="store-tab px-4 py-2 rounded-xl text-[10px] font-black uppercase transition-all">Super C</button>
                <button onclick="switchStore('maxi')" id="btn-maxi" class="store-tab px-4 py-2 rounded-xl text-[10px] font-black uppercase transition-all text-slate-400">Maxi</button>
                <button onclick="switchStore('loblaw')" id="btn-loblaw" class="store-tab px-4 py-2 rounded-xl text-[10px] font-black uppercase transition-all text-slate-400">Loblaws</button>
                <button onclick="switchStore('iga')" id="btn-iga" class="store-tab px-4 py-2 rounded-xl text-[10px] font-black uppercase transition-all text-slate-400">IGA</button>
                <button onclick="switchStore('metro')" id="btn-metro" class="store-tab px-4 py-2 rounded-xl text-[10px] font-black uppercase transition-all text-slate-400">M√©tro</button>
                <button onclick="switchStore('provigo')" id="btn-provigo" class="store-tab px-4 py-2 rounded-xl text-[10px] font-black uppercase transition-all text-slate-400">Provigo</button>
            </div>
        </div>
    </nav>

    <main class="max-w-6xl mx-auto px-6 py-12">
        <div class="mb-12 text-center md:text-left">
            <h2 class="text-2xl md:text-4xl font-black uppercase tracking-tighter leading-tight italic">
                Votre menu cette semaine chez <br>
                <span id="dynamicStoreTitle" class="text-5xl md:text-7xl underline decoration-8 underline-offset-8 transition-colors duration-500" style="color: #e31e24;">Super C</span>
            </h2>
        </div>

        <header class="mb-12">
            <div class="bg-white border-y border-r border-slate-200 p-10 rounded-[4rem] shadow-sm border-l-[16px] transition-all duration-500" id="headerBorder" style="border-left-color: #e31e24;">
                <h1 class="text-2xl font-black text-slate-900 mb-4 uppercase tracking-tighter italic">
                    Bienvenue sur <span id="storeColorText" class="text-red-600">SuperMenu</span>.
                </h1>
                <p class="text-slate-500 text-lg leading-relaxed max-w-4xl">
                    Notre mission est simple : <strong>vous aider √† mieux manger tout en payant moins.</strong> 
                    Chaque semaine, nous analysons la circulaire pour cr√©er un menu √©quilibr√© bas√© exclusivement sur les sp√©ciaux en vigueur. Ne cherchez plus quoi cuisiner, nous avons d√©j√† fait le calcul.
                </p>
            </div>
        </header>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-16 font-black italic text-white">
            <div id="cardBudget" class="bg-red-600 p-8 rounded-[3rem] shadow-xl transition-colors duration-500">
                <p class="text-white/60 text-[10px] uppercase mb-1">Budget Hebdo</p>
                <p id="totalPrice" class="text-4xl">0,00 $</p>
            </div>
            <div class="bg-emerald-600 p-8 rounded-[3rem] shadow-xl">
                <p class="text-white/60 text-[10px] uppercase mb-1">√âconomie</p>
                <p id="savedPrice" class="text-4xl">0,00 $</p>
            </div>
            <div class="md:col-span-2 bg-slate-900 p-8 rounded-[3rem] shadow-xl flex items-center">
                <div class="text-3xl mr-6">ü™Ñ</div>
                <p id="tipText" class="text-slate-200 text-sm italic">Astuce...</p>
            </div>
        </div>

        <div id="recipeGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10 mb-20"></div>

        <section class="premium-list rounded-[4rem] p-10 text-white shadow-2xl mb-24">
            <div class="flex flex-col md:flex-row justify-between items-center mb-10 border-b border-white/10 pb-8">
                <div><h2 id="storeListTitle" class="text-4xl font-black tracking-tighter text-red-600 uppercase italic">Ma Liste</h2></div>
                <div class="flex space-x-3 mt-6 md:mt-0">
                    <button onclick="shareList()" class="bg-white/10 px-6 py-3 rounded-2xl text-[10px] font-black uppercase hover:bg-white/20 transition-all italic">üì§ Partager</button>
                    <button onclick="resetList()" class="bg-red-600/20 text-red-400 px-6 py-3 rounded-2xl text-[10px] font-black uppercase hover:bg-red-600/40 transition-all italic">Vider</button>
                </div>
            </div>
            <div id="shoppingList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5"></div>
        </section>
    </main>

    <div id="recipeModal" class="fixed inset-0 z-50 flex items-center justify-center opacity-0 pointer-events-none transition-all duration-300 modal-blur p-4">
        <div class="absolute inset-0 bg-slate-900/80" onclick="closeModal()"></div>
        <div class="bg-white w-full max-w-xl rounded-[3rem] shadow-2xl relative z-10 p-10 italic max-h-[85vh] overflow-y-auto">
            <div id="modalContent"></div>
            <button onclick="closeModal()" class="absolute top-8 right-8 text-slate-300 hover:text-red-600 text-2xl font-bold">‚úï</button>
        </div>
    </div>

    <script>
        const storeConfig = {
            superc: { name: "Super C", color: "#e31e24", url: "https://www.superc.ca/circulaire-en-ligne", tip: "Viandes format familial en rabais.", recipes: [
                { name: "Spaghetti Bolo", price: 8.50, img: "https://images.unsplash.com/photo-1551183053-bf91a1d81141?w=500", items: ["B≈ìuf hach√©", "P√¢tes", "Sauce"], steps: ["Porter de l'eau sal√©e √† √©bullition.","Brunir le b≈ìuf avec des oignons.","Ajouter la sauce et laisser r√©duire.","Cuire les p√¢tes al dente.","M√©langer et servir chaud."] },
                { name: "Tacos Poulet", price: 11.20, img: "https://images.unsplash.com/photo-1551504734-5ee1c4a1479b?w=500", items: ["Poulet", "Tortillas", "Laitue"], steps: ["√âmincer le poulet en lani√®res.","Saisir au wok avec des √©pices.","Chauffer les tortillas √† la vapeur.","Pr√©parer la salsa et la laitue.","Assembler avec de la cr√®me sure."] },
                { name: "Stir-fry Tofu", price: 7.00, img: "https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=500", items: ["Tofu", "Brocoli", "Riz"], steps: ["D√©tailler le tofu en gros cubes.","Sauter au wok jusqu'√† ce qu'il soit dor√©.","Ajouter les l√©gumes croquants.","D√©glacer avec de la sauce soja.","Servir sur le riz vapeur."] },
                { name: "Pizza Garnie", price: 9.00, img: "https://images.unsplash.com/photo-1513104890138-7c749659a591?w=500", items: ["P√¢te", "Pepperoni", "Fromage"], steps: ["Pr√©chauffer le four √† 425¬∞F.","√âtaler la p√¢te finement.","Napper de sauce et de pepperoni.","Couvrir de fromage r√¢p√©.","Cuire 15 min au centre du four."] },
                { name: "Fish & Chips", price: 14.50, img: "https://images.unsplash.com/photo-1524335582521-5f7e34743ee7?w=500", items: ["Poisson", "Frites", "Citron"], steps: ["Pr√©chauffer le four pour les frites.","Cuire les filets pan√©s √† part.","Trancher les citrons en quartiers.","Pr√©parer une sauce tartare rapide.","Dresser les assiettes bien chaudes."] },
                { name: "Poulet R√¥ti", price: 12.00, img: "https://images.unsplash.com/photo-1598515214211-89d3c73ae83b?w=500", items: ["Poulet entier", "Patates", "Carottes"], steps: ["Pr√©chauffer le four √† 375¬∞F.","Assaisonner le poulet vigoureusement.","Disposer les l√©gumes autour.","R√¥tir pendant environ 1h20.","Laisser reposer avant de servir."] },
                { name: "Soupe √† l'Orge", price: 6.50, img: "https://images.unsplash.com/photo-1547592166-23ac45744acd?w=500", items: ["Bouillon", "L√©gumes", "Orge"], steps: ["Chauffer le bouillon de b≈ìuf.","Couper les carottes et navets.","Verser l'orge dans la marmite.","Mijoter √† feu doux 45 minutes.","Ajuster le sel et le poivre."] }
            ]},
            maxi: { name: "Maxi", color: "#3b82f6", url: "https://www.maxi.ca/print-flyer", tip: "Points PC Optimum doubl√©s !", recipes: [
                { name: "Porc Effiloch√©", price: 9.50, img: "https://images.unsplash.com/photo-1527324688151-0e627063f2b1?w=500", items: ["Porc", "Sauce BBQ", "Pains"], steps: ["Placer l'√©paule dans la mijoteuse.","Couvrir de sauce et √©pices.","Cuire 8h √† basse temp√©rature.","Effilocher √† la fourchette.","Servir dans des pains brioch√©s."] },
                { name: "Chili Rouge", price: 6.80, img: "https://images.unsplash.com/photo-1544148103-0773bf10d330?w=500", items: ["Haricots", "B≈ìuf", "Ma√Øs"], steps: ["Faire brunir le b≈ìuf hach√©.","Ajouter oignons et poivrons.","Verser tomates et haricots.","Laisser mijoter 30 minutes.","Dresser avec du fromage r√¢p√©."] },
                { name: "Quesadillas", price: 10.00, img: "https://images.unsplash.com/photo-1599974579688-8dbdd335c77f?w=500", items: ["Tortillas", "Fromage", "Poivrons"], steps: ["Trancher les poivrons finement.","Garnir la moiti√© d'une tortilla.","Plier et chauffer √† la po√™le.","Griller 2 min par c√¥t√©.","Trancher en triangles."] },
                { name: "P√¢t√© Chinois", price: 8.90, img: "https://images.unsplash.com/photo-1592415499556-74fcb9f18667?w=500", items: ["B≈ìuf", "Ma√Øs", "Patates"], steps: ["Cuire les patates en pur√©e.","Faire revenir le b≈ìuf hach√©.","Superposer viande, ma√Øs, pur√©e.","Cuire au four √† 375¬∞F.","Gratiner 5 min √† la fin."] },
                { name: "Burger Poisson", price: 12.00, img: "https://images.unsplash.com/photo-1521305916504-4a1121188589?w=500", items: ["Pains", "Poisson", "Laitue"], steps: ["Cuire le poisson pan√© au four.","Toaster l'int√©rieur des pains.","Tartiner de mayonnaise citronn√©e.","Ajouter la laitue croquante.","Assembler et servir."] },
                { name: "C√¥telettes Porc", price: 13.50, img: "https://images.unsplash.com/photo-1544025162-d76694265947?w=500", items: ["Porc", "Patates", "Haricots"], steps: ["Saisir les c√¥telettes √† la po√™le.","Pr√©parer une pur√©e onctueuse.","Cuire les haricots √† la vapeur.","R√©aliser une sauce au jus de viande.","Dresser harmonieusement."] },
                { name: "Mac & Cheese", price: 7.20, img: "https://images.unsplash.com/photo-1543339308-43e59d6b73a6?w=500", items: ["Macaroni", "Cheddar", "Lait"], steps: ["Bouillir les p√¢tes.","Faire un roux (beurre/farine).","Incorporer le lait et fromage.","M√©langer avec les p√¢tes.","Passer au four 10 min."] }
            ]},
            iga: { name: "IGA", color: "#059669", url: "https://www.iga.net/fr/circulaire_hebdomadaire", tip: "Viandes Sterling Silver en vedette.", recipes: [
                { name: "Bavette Grill√©e", price: 17.50, img: "https://images.unsplash.com/photo-1558030006-450675393462?w=500", items: ["Bavette", "√âchalotes", "Vin"], steps: ["Temp√©rer la viande 20 min.","Saisir √† feu vif 3 min par c√¥t√©.","Faire suer les √©chalotes.","D√©glacer au vin rouge.","Trancher et napper de sauce."] },
                { name: "Salade Quinoa", price: 9.00, img: "https://images.unsplash.com/photo-1512621776951-a57141f2eefd?w=500", items: ["Quinoa", "Concombre", "Feta"], steps: ["Cuire le quinoa dans l'eau sal√©e.","Laisser refroidir compl√®tement.","Couper concombre et feta en d√©s.","M√©langer avec huile d'olive/citron.","Parsemer de menthe fra√Æche."] },
                { name: "Penne Arrabbiata", price: 8.50, img: "https://images.unsplash.com/photo-1563379926898-05f4575a45d8?w=500", items: ["Penne", "Piment", "Ail"], steps: ["Faire revenir l'ail et piment.","Ajouter les tomates concass√©es.","Laisser mijoter 15 minutes.","Cuire les penne al dente.","Sauter les p√¢tes dans la sauce."] },
                { name: "Wok Crevettes", price: 15.00, img: "https://images.unsplash.com/photo-1559737558-2f5a35f4523b?w=500", items: ["Crevettes", "Pois", "Gingembre"], steps: ["Pr√©parer les l√©gumes du wok.","Sauter les crevettes √† feu vif.","Ajouter le gingembre et ail.","Verser un trait de soja/miel.","Servir imm√©diatement."] },
                { name: "Morue Papillote", price: 14.50, img: "https://images.unsplash.com/photo-1519708227418-c8fd9a32b7a2?w=500", items: ["Morue", "Zucchini", "Thym"], steps: ["Placer la morue sur l'alu.","Ajouter zucchini et herbes.","Fermer herm√©tiquement.","Cuire 15 min √† 400¬∞F.","Servir dans le papier."] },
                { name: "Lasagne Classique", price: 12.00, img: "https://images.unsplash.com/photo-1551183053-bf91a1d81141?w=500", items: ["P√¢tes", "B≈ìuf", "Ricotta"], steps: ["Pr√©parer la bolognaise.","M√©langer ricotta et herbes.","Monter les √©tages de la lasagne.","Couvrir de mozzarella.","Cuire 45 min au four."] },
                { name: "Poulet au Beurre", price: 13.00, img: "https://images.unsplash.com/photo-1588166524941-3bf61a9c41db?w=500", items: ["Poulet", "Sauce", "Naan"], steps: ["Dorer le poulet en cubes.","Ajouter la sauce masala.","Incorporer la cr√®me √† la fin.","Mijoter 10 minutes.","Accompagner de pain naan."] }
            ]},
            metro: { name: "M√©tro", color: "#f97316", url: "https://www.metro.ca/circulaire-en-ligne", tip: "Marques Irresistibles en vedette.", recipes: [
                { name: "Longe de Porc", price: 12.00, img: "https://images.unsplash.com/photo-1544025162-d76694265947?w=500", items: ["Porc", "Navet", "Moutarde"], steps: ["Badigeonner de moutarde.","Disposer les navets.","R√¥tir √† 350¬∞F.","Arroser r√©guli√®rement.","Laisser reposer 10 min."] },
                { name: "Omelette Jambon", price: 6.50, img: "https://images.unsplash.com/photo-1494597564530-871f2b93ac55?w=500", items: ["Oeufs", "Jambon", "Fromage"], steps: ["Battre les oeufs.","Faire chauffer la po√™le.","Verser et garnir.","Plier proprement.","Servir avec toasts."] },
                { name: "Ratatouille", price: 8.00, img: "https://images.unsplash.com/photo-1572453860999-18607ee8c5a5?w=500", items: ["Aubergine", "Tomate", "Zucchini"], steps: ["Couper tous les l√©gumes.","Sauter dans l'ordre.","Ajouter ail et herbes.","Mijoter 45 minutes.","Savourer chaud ou froid."] },
                { name: "Gnocchis Beurre", price: 9.50, img: "https://images.unsplash.com/photo-1551183053-bf91a1d81141?w=500", items: ["Gnocchis", "Beurre", "Sauge"], steps: ["Bouillir les gnocchis.","Chauffer le beurre noisette.","Frire la sauge.","Sauter les gnocchis.","Servir bien dor√©."] },
                { name: "Truite Amandes", price: 14.00, img: "https://images.unsplash.com/photo-1519708227418-c8fd9a32b7a2?w=500", items: ["Truite", "Amandes", "Haricots"], steps: ["Griller les amandes.","Saisir la truite peau.","Cuire les haricots verts.","Dresser l'assiette.","Arroser de beurre citron."] },
                { name: "Boeuf Bourguignon", price: 16.00, img: "https://images.unsplash.com/photo-1534939561126-755ec61b8c9e?w=500", items: ["Boeuf", "Vin rouge", "Carottes"], steps: ["Mariner la viande.","Dorer les cubes b≈ìuf.","Ajouter vin et l√©gumes.","Mijoter 3h √† feu doux.","V√©rifier la tendret√©."] },
                { name: "Club Sandwich", price: 10.50, img: "https://images.unsplash.com/photo-1525351484163-7529414344d8?w=500", items: ["Pain", "Dinde", "Bacon"], steps: ["Griller 3 pains.","√âtager dinde et laitue.","Ajouter bacon croustillant.","Fermer et trancher.","Servir avec cornichons."] }
            ]},
            provigo: { name: "Provigo", color: "#6366f1", url: "https://www.provigo.ca/print-flyer", tip: "Bio PC Le Choix du Pr√©sident.", recipes: [
                { name: "Bowl √ânergie", price: 11.00, img: "https://images.unsplash.com/photo-1512621776951-a57141f2eefd?w=500", items: ["Kale", "Patate douce", "Pois"], steps: ["R√¥tir les patates.","Pr√©parer le kale.","Rincer les pois chiches.","Assembler le bol.","Saucer au tahini."] },
                { name: "Fusilli Pesto", price: 8.50, img: "https://images.unsplash.com/photo-1473093226795-af9932fe5856?w=500", items: ["P√¢tes", "Pesto", "Tomates"], steps: ["Cuire les p√¢tes.","Couper les tomates.","M√©langer au pesto.","Ajouter parmesan.","Servir ti√®de."] },
                { name: "Wrap Thon", price: 7.00, img: "https://images.unsplash.com/photo-1601050633729-19508588079b?w=500", items: ["Wrap", "Thon", "Mayo"], steps: ["√âgoutter le thon.","M√©langer thon/mayo.","√âtaler sur wrap.","Rouler fermement.","Trancher en biseau."] },
                { name: "Poulet Citron", price: 12.50, img: "https://images.unsplash.com/photo-1532550907401-a500c9a57435?w=500", items: ["Cuisses", "Citron", "Olive"], steps: ["Placer au four.","Ajouter citron/olives.","Huiler et saler.","Cuire 45 min.","Dorer la peau."] },
                { name: "Filet de Sole", price: 13.50, img: "https://images.unsplash.com/photo-1519708227418-c8fd9a32b7a2?w=500", items: ["Sole", "C√¢pres", "√âpinards"], steps: ["Fariner le poisson.","Saisir au beurre.","Ajouter c√¢pres.","Faire tomber √©pinards.","Servir l√©ger."] },
                { name: "Chili Carne", price: 11.00, img: "https://images.unsplash.com/photo-1544148103-0773bf10d330?w=500", items: ["B≈ìuf", "Haricots", "Piment"], steps: ["Brunir le b≈ìuf.","Ajouter piment.","Verser sauce tomate.","Mijoter 1h.","Servir avec riz."] },
                { name: "Gratin Oignon", price: 8.00, img: "https://images.unsplash.com/photo-1547592166-23ac45744acd?w=500", items: ["Oignon", "Fromage", "Pain"], steps: ["Suer les oignons.","Mouiller bouillon.","Mettre au bol.","Pain et fromage.","Gratiner fort."] }
            ]},
            loblaw: { name: "Loblaws", color: "#facc15", url: "https://www.loblaws.ca/print-flyer", tip: "Offres PC Optimum en vedette.", recipes: [
                { name: "Saumon Grill√©", price: 16.00, img: "https://images.unsplash.com/photo-1467003909585-2f8a72700288?w=500", items: ["Saumon", "Asperges", "Citron"], steps: ["Chauffer le grill.","Huiler le saumon.","Griller les asperges.","Cuire 10 minutes.","Poivrer et servir."] },
                { name: "Salade C√©sar", price: 11.00, img: "https://images.unsplash.com/photo-1550304943-4f24f54ddde9?w=500", items: ["Romaine", "Bacon", "Pain"], steps: ["Laver la romaine.","Griller le bacon.","Faire les cro√ªtons.","M√©langer la sauce.","Dresser l'assiette."] },
                { name: "Risotto Champis", price: 13.00, img: "https://images.unsplash.com/photo-1476124369491-e7addf5db371?w=500", items: ["Riz", "Champignons", "Beurre"], steps: ["Chauffer le bouillon.","Sauter les champis.","Nacrer le riz.","Verser le bouillon.","Lier au parmesan."] },
                { name: "Steak au Poivre", price: 18.00, img: "https://images.unsplash.com/photo-1546964124-0cce460f38ef?w=500", items: ["Steak", "Cr√®me", "Poivre"], steps: ["Poivrer le steak.","Saisir √† la po√™le.","Ajouter la cr√®me.","R√©duire la sauce.","Napper la viande."] },
                { name: "Moules Marini√®res", price: 15.00, img: "https://images.unsplash.com/photo-1453831362806-3d5577f014a4?w=500", items: ["Moules", "Vin blanc", "Persil"], steps: ["Laver les moules.","Suer les √©chalotes.","Verser le vin.","Cuire 5 minutes.","Parsemer de persil."] },
                { name: "Curry de Poulet", price: 14.00, img: "https://images.unsplash.com/photo-1455619452474-d2be8b1e70cd?w=500", items: ["Poulet", "Lait coco", "√âpices"], steps: ["Dorer le poulet.","Ajouter le curry.","Verser le coco.","Mijoter 20 min.","Servir sur riz."] },
                { name: "Bagels Lox", price: 12.00, img: "https://images.unsplash.com/photo-1510913817173-9804e10df36a?w=500", items: ["Bagels", "Saumon fum√©", "Fromage"], steps: ["Toaster le bagel.","Mettre le fromage.","Placer le saumon.","Ajouter les c√¢pres.","Trancher en deux."] }
            ]}
        };

        let currentStore = 'superc';

        function switchStore(id) {
            currentStore = id;
            const c = storeConfig[id];
            
            document.documentElement.style.setProperty('--store-color', c.color);
            document.getElementById('topBorder').style.borderColor = c.color;
            document.getElementById('headerBorder').style.borderLeftColor = c.color;
            document.getElementById('logoTag').style.backgroundColor = c.color;
            document.getElementById('cardBudget').style.backgroundColor = c.color;
            document.getElementById('statusBadge').style.backgroundColor = c.color;
            document.getElementById('storeColorText').style.color = c.color;
            document.getElementById('storeListTitle').style.color = c.color;
            
            const dTitle = document.getElementById('dynamicStoreTitle');
            dTitle.style.color = c.color;
            dTitle.innerText = c.name;

            document.getElementById('tipText').innerText = c.tip;
            document.getElementById('linkStoreName').innerText = c.name;
            document.getElementById('storeLink').href = c.url;

            document.querySelectorAll('.store-tab').forEach(b => {
                b.className = "store-tab px-4 py-2 rounded-xl text-[10px] font-black uppercase transition-all text-slate-400";
                b.style.backgroundColor = 'transparent';
            });
            const active = document.getElementById(`btn-${id}`);
            active.classList.add('text-white');
            active.style.backgroundColor = c.color;
            
            render();
        }

        function toggleItem(el, name) {
            const checked = JSON.parse(localStorage.getItem('sm_v28') || '[]');
            if (el.classList.contains('checked-item')) {
                el.classList.remove('checked-item');
                const idx = checked.indexOf(name);
                if (idx > -1) checked.splice(idx, 1);
            } else {
                el.classList.add('checked-item');
                checked.push(name);
            }
            localStorage.setItem('sm_v28', JSON.stringify(checked));
        }

        function render() {
            const config = storeConfig[currentStore];
            const grid = document.getElementById('recipeGrid');
            const list = document.getElementById('shoppingList');
            const savedChecked = JSON.parse(localStorage.getItem('sm_v28') || '[]');
            
            grid.innerHTML = ''; list.innerHTML = '';
            let total = 0;

            config.recipes.forEach((r, i) => {
                total += r.price;
                grid.innerHTML += `
                    <div class="bg-white rounded-[2.5rem] overflow-hidden shadow-sm border border-slate-100 recipe-card transition-all p-5">
                        <img src="${r.img}" class="recipe-img mb-5 shadow-sm" />
                        <h3 class="font-black text-lg uppercase mb-1 italic">${r.name}</h3>
                        <p class="text-slate-400 text-[9px] mb-5 uppercase tracking-widest font-bold">${r.items.join(' ‚Ä¢ ')}</p>
                        <div class="flex justify-between items-center">
                            <span class="font-black text-xl italic" style="color:${config.color}">${r.price.toFixed(2)} $</span>
                            <button onclick="openModal(${i})" class="bg-slate-900 text-white text-[9px] font-black px-4 py-2 rounded-xl uppercase italic">Recette</button>
                        </div>
                    </div>`;

                r.items.forEach(item => {
                    const isChecked = savedChecked.includes(item);
                    list.innerHTML += `
                        <div class="flex items-center space-x-4 p-4 bg-white/5 rounded-2xl border border-white/5 hover:bg-white/10 cursor-pointer transition-all ${isChecked ? 'checked-item' : ''}" onclick="toggleItem(this, '${item}')">
                            <div class="check-box"><svg class="check-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 13l4 4L19 7"/></svg></div>
                            <span class="item-text text-slate-200 text-sm font-bold uppercase italic">${item}</span>
                        </div>`;
                });
            });
            document.getElementById('totalPrice').innerText = total.toFixed(2) + " $";
            document.getElementById('savedPrice').innerText = (total * 0.45).toFixed(2) + " $";
        }

        function shareList() {
            const config = storeConfig[currentStore];
            let text = `üõí Liste SuperMenu (${config.name}) :\n\n`;
            config.recipes.forEach(r => { text += `üç¥ ${r.name}\n`; r.items.forEach(i => text += `- ${i}\n`); });
            if (navigator.share) navigator.share({ title: 'Ma Liste SuperMenu', text: text });
            else alert("Lien copi√© !");
        }

        function openModal(i) {
            const r = storeConfig[currentStore].recipes[i];
            const color = storeConfig[currentStore].color;
            document.getElementById('modalContent').innerHTML = `
                <img src="${r.img}" class="w-full h-40 object-cover rounded-[2rem] mb-6 shadow-md" />
                <h3 class="text-2xl font-black uppercase mb-4" style="color:${color}">${r.name}</h3>
                <div class="h-1 w-12 bg-slate-100 mb-6"></div>
                <div class="space-y-4">
                    ${r.steps.map((s, idx) => `<div class="flex items-start"><span class="font-black mr-3 text-lg" style="color:${color}">${idx+1}</span><p class="text-slate-600 text-sm italic font-medium leading-relaxed">${s}</p></div>`).join('')}
                </div>`;
            document.getElementById('recipeModal').classList.remove('opacity-0', 'pointer-events-none');
        }

        function closeModal() { document.getElementById('recipeModal').classList.add('opacity-0', 'pointer-events-none'); }
        function resetList() { localStorage.removeItem('sm_v28'); render(); }

        switchStore('superc');
    </script>
</body>
</html>